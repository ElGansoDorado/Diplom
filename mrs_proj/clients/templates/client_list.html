{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Список пациентов</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/clients_styles.css' %}">
</head>
<body>

<!-- Main Content -->
<main>
    <h2>Список пациентов</h2>

    <!-- Existing client list -->
    <table>
        <thead>
        <tr>
            <th>ФИО</th>
            <th>Возраст</th>
            <th>ИМТ</th>
            <th>SPO2</th>
            <th>Дата поступления</th>
            <th>Результат</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        {% for client in clients %}
        <tr>
            <td>
                <a href="{% url 'client_detail' token=client.token %}">{{ client.last_name }} {{client.first_name }} {{ client.patronymic }}</a>

            </td>
            <td>{{ client.age }}</td>
            <td>{{ client.body_mass_index }}</td>
            <td>{{ client.SPO2 }}</td>
            <td>{{ client.admission_date }}</td>
            <td>{{ client.result }}</td>
            <td>
                <a href="{% url 'client_detail' token=client.token %}">Delete</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- Add button to toggle the form -->
    <button id="toggleFormBtn" onclick="toggleForm()">Добавить пациента</button>

    <!-- Form to add a new client -->
    <form id="addClientForm" method="post" action="{% url 'client_list' %}" style="display: none;">
        {% csrf_token %}
        {{ form.as_table }}
        <input type="hidden" name="action" value="save">
        <button type="submit">Сохранить</button>
        <button type="button" onclick="cancelAddClient()">Отменить</button>
    </form>

</main>

<script src="{% static 'scripts/clients_scripts.js' %}"></script>

</body>
</html>
